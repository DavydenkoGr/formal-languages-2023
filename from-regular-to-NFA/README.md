# Практическое домашнее задание

## Условие
Алфавит регулярного выражения: *{a, b, c, 1}*

Даны регулярное выражение α, буква x и натуральное число k. Вывести, есть ли в языке L слова, содержащие подслово x^k.

## Требования
Установленные googletest и gcovr.

## Использование
Для того чтобы решить задачу, импортируйте заголовочный файл Functions.h и воспользуйтесь функцией MatchRegular():

```
#include "Functions.h"

MatchRegular("α", 'x', k);
```

## Запуск тестов
Чтобы запустить тесты, используйте следующие команды:

```
cd from-regular-to-NFA
chmod +x ./run_tests.sh
./run_tests.sh
```

## Описание работы алгоритма
Парсится регулярное выражение:

- если встречается символ алфавита, строится автомат, принимающий этот символ и кладется в стек;
- если встречается операция сложения, конкатенации или звезды Клини, из стека извлекаются последние автоматы и к ним применяется соответствующая операция.

В результате, при корректном входе остается один автомат, задающий это выражение.

По автомату M создается и возвращается автомат M\`, т.ч. M\` принимает все подслова L(M) и все переходы в M\` однобуквенные.

Чтобы решить задачу, осталось найти подслово x^k, рассмотрев все пути, состоящие только из x, длины ровно k.

## Асимптотика 
Пусть |α|=n. Тогда:

Кол-во ребер в автомате - O(n) (при применении операций ребра появляются только из стартовой и терминальной вершин, 
можно считать, что после каждой операции появляется константное количество ребер (<=4), а изначально для каждого нового
символа регулярного выражения создается 2 ребра);

Построение автомата - O(размер входа * асимптотика set), суммарно O(n &ast; logn);

Каждый символ регулярного выражения добавляет 3 вершины, конкатенация добавляет 1 вершину, сложение и звезда Клини - 2 вершины;
Итого размер автомата для регулярного выражения - O(n);

Асимптотика суммарного слияния автоматов O(n^2 &ast; logn);

Удаление eps-переходов происходит за кол-во ребер * кол-во состояний: за одну итерацию перебираются все eps-ребра и всего операций O(n).
Поскольку добавляется не более n^2 новых ребер (eps-переходы не повторяются), каждая итерация цикла будет занимать O(n^2 &ast; logn) времени.
Суммарная асимптотика O(n^3 &ast; logn)

Перестройка автомата за размер автомата O(n &ast; logn) (не считая удаление переходов);

Поиск подслова работает за k * кол-во переходов по x (их O(n)) Чтобы асимптотика не ломалась при больших k,
достаточно искать слова длины min(k, кол-во вершин + 1). Это верно, поскольку, если найдется путь по x длины кол-во вершин + 1, тогда будет цикл на ребрах x.
В этом случае, поскольку все состояния завершающие, можно найти подслово x^k для любого k.
Тогда асимптотика будет O(n^2 &ast; logn).

Итого: O(n^3 &ast; logn).
